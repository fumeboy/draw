(function(t){function e(e){for(var a,n,s=e[0],c=e[1],l=e[2],v=0,p=[];v<s.length;v++)n=s[v],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&p.push(o[n][0]),o[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],a=!0,s=1;s<i.length;s++){var c=i[s];0!==o[c]&&(a=!1)}a&&(r.splice(e--,1),t=n(n.s=i[0]))}return t}var a={},o={app:0},r=[];function n(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=a,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/draw/dist/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-app",{attrs:{id:"inspire"}},[i("v-navigation-drawer",{attrs:{app:"",clipped:t.$vuetify.breakpoint.lgAndUp},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[i("div",{staticClass:"color-viewer",style:"background-color: "+t.color_selector}),i("v-text-field",{attrs:{flat:"",solo:"",filled:"","hide-details":"","prepend-inner-icon":"mdi-pen","append-icon":"mdi-plus","background-color":"#f1f1f1",label:"color"},on:{"click:append":t.addColor},model:{value:t.color_selector,callback:function(e){t.color_selector=e},expression:"color_selector"}}),i("div",t._l(t.history,(function(e){return i("div",{key:e.i,staticClass:"color-viewer",style:"background-color: "+e.v,on:{click:function(){return t.setColor(e.v)}}})})),0)],1),i("v-app-bar",{attrs:{"clipped-left":t.$vuetify.breakpoint.lgAndUp,app:"",color:"blue darken-3",dark:""}},[i("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),i("v-toolbar-title",{staticClass:"ml-0 pl-4",staticStyle:{width:"300px"}},[i("span",{staticClass:"hidden-sm-and-down"},[t._v("PIXEL DRAWER")])])],1),i("v-main",{staticStyle:{"background-color":"rgba(241, 241, 241, 0.5)"}},[i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("div",{ref:"canvas",attrs:{id:"canvas"}})]),i("div",{staticClass:"now-color"},[i("div",{staticClass:"pen"},[i("div",{staticClass:"color-box",style:"background-color: "+t.penColor}),i("div",{staticClass:"bar"},[i("p",[i("b",[t._v("画笔颜色")])]),i("p",[t._v(t._s(t.penColor))])])])]),i("div",{staticClass:"clear-btn"},[i("v-btn",{attrs:{outlined:"",color:"secondary",dark:""},on:{click:function(e){return t.setColor(null)}}},[i("v-icon",[t._v("mdi-eraser")]),t._v(" 橡皮擦 ")],1)],1)],1)],1),i("v-speed-dial",{attrs:{bottom:"",right:"",fixed:""},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-btn",{attrs:{color:"pink",dark:"",depressed:"",fab:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.fab?i("v-icon",[t._v("mdi-close")]):i("v-icon",[t._v("mdi-plus")])],1)]},proxy:!0}]),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[i("v-btn",{attrs:{color:"pink",dark:"",fab:"",depressed:""},on:{click:function(e){t.dialog=!t.dialog}}},[i("v-icon",[t._v("mdi-export")])],1),i("v-btn",{attrs:{color:"pink",dark:"",fab:"",depressed:""},on:{click:function(e){t.dialog2=!0}}},[i("v-icon",[t._v("mdi-help")])],1),i("v-btn",{attrs:{color:"pink",dark:"",fab:"",depressed:""},on:{click:function(e){t.dialog4=!0}}},[i("v-icon",[t._v("mdi-delete")])],1)],1),i("v-dialog",{attrs:{width:"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[t._v(" 导出图片 ")]),i("v-container",[i("v-row",{staticClass:"mx-2"},[i("v-col",{staticClass:"align-center justify-space-between",attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:"文件名"},model:{value:t.export_filename,callback:function(e){t.export_filename=e},expression:"export_filename"}})],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel ")]),i("v-btn",{attrs:{text:""},on:{click:function(){t.dialog=!1,t.exportt()}}},[t._v("Save ")])],1)],1)],1),i("v-dialog",{attrs:{width:"800px"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[i("v-card",[i("v-card-title",[t._v(" 说明 ")]),i("v-container",[i("v-row",{staticClass:"mx-2"},[i("v-col",{staticClass:"align-center justify-space-between",attrs:{cols:"12"}},[t._v(" 本网页程序应当在PC端使用。 左侧是调色器以及色彩板，可以选择笔刷颜色和背景颜色 （导出图片时，背景颜色不显示） 笔刷颜色设置为空时，表示橡皮擦 ")])],1)],1),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog2=!1}}},[t._v("OK")])],1)],1)],1),i("v-dialog",{attrs:{persistent:"",width:"800px"},model:{value:t.dialog3,callback:function(e){t.dialog3=e},expression:"dialog3"}},[i("v-card",[i("v-card-title",[t._v(" 选择画布大小 ")]),i("v-container",[i("v-row",{staticClass:"mx-2"},[i("v-col",{staticClass:"align-center justify-space-between",attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:"画布边长"},model:{value:t.canvas_size,callback:function(e){t.canvas_size=e},expression:"canvas_size"}})],1)],1)],1),i("v-card-actions",[i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.canvas_size=64,t.set_size()}}},[t._v("64 x 64")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.canvas_size=32,t.set_size()}}},[t._v("32 x 32")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.canvas_size=8,t.set_size()}}},[t._v("8 x 8")]),i("v-spacer"),i("v-btn",{attrs:{text:""},on:{click:function(){t.set_size()}}},[t._v("Done ")])],1)],1)],1),i("v-dialog",{attrs:{width:"800px"},model:{value:t.dialog4,callback:function(e){t.dialog4=e},expression:"dialog4"}},[i("v-card",[i("v-card-title",[t._v(" 重建画布 ")]),i("v-container",[t._v(" 危险行为需要二次确认 ")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.dialog4=!1}}},[t._v("Cancel ")]),i("v-btn",{attrs:{text:"",color:"red"},on:{click:function(){t.dialog4=!1,t.dialog3=!0}}},[t._v("Continue ")])],1)],1)],1)],1)],1)},r=[];i("cb29"),i("a15b");function n(t,e){return this.canvas=null,this.init(t),this.cvs=this.canvas.getContext("2d"),this.penColor="#000",this.ifClear=!1,this.boxSize=null,this.size=e,this.gridArr=new Array(this.size*this.size),this.distanceX=null,this.distanceY=null,this.preX=null,this.preY=null,this.start(),this.click(),this.touchstart(),this}n.prototype.init=function(t){t.innerHTML="<canvas></canvas>",this.canvas=t.children[0]},n.prototype.SetColor=function(t){t?(this.penColor=t,this.ifClear=!1):this.ifClear=!0},n.prototype.computerWindow=function(){this.distanceX=this.canvas.getBoundingClientRect().x,this.distanceY=this.canvas.getBoundingClientRect().y},n.prototype.start=function(){var t;t=window.innerHeight>window.innerWidth?parseInt(.85*window.innerWidth):parseInt(.85*window.innerHeight),t=parseInt(t/this.size)*this.size,this.canvas.width=this.canvas.height=t,this.boxSize=t/this.size,this.computerWindow(),this.drawBg()},n.prototype.touchstart=function(){var t=this.touchmove.bind(this);this.canvas.addEventListener("touchstart",function(e){e.preventDefault();var i=e.changedTouches[0],a=this.computedXY(i.pageX,i.pageY,!0);this.beforeDraw(a.re_x,a.re_y),this.canvas.addEventListener("touchmove",s(t,5,20))}.bind(this)),this.canvas.addEventListener("touchend",function(){this.canvas.removeEventListener("touchmove",t)}.bind(this))},n.prototype.click=function(){var t=this.mousemove.bind(this);this.canvas.addEventListener("mousedown",function(e){e.preventDefault();var i=this.computedXY(e.offsetX,e.offsetY);this.beforeDraw(i.re_x,i.re_y),this.canvas.addEventListener("mousemove",t)}.bind(this)),this.canvas.addEventListener("mouseleave",function(){this.canvas.removeEventListener("mousemove",t)}.bind(this)),this.canvas.addEventListener("mouseup",function(){this.canvas.removeEventListener("mousemove",t)}.bind(this))},n.prototype.mousemove=function(t){var e=this.computedXY(t.offsetX,t.offsetY);e.re_y&&e.re_x&&this.beforeDraw(e.re_x,e.re_y,!0)},n.prototype.touchmove=function(t){var e=t.changedTouches[0],i=this.computedXY(e.pageX,e.pageY,!0);i.re_y&&i.re_x&&(i.re_x===this.preX&&i.re_y===this.preY||this.beforeDraw(i.re_x,i.re_y,!0))},n.prototype.computedXY=function(t,e,i){i&&(t-=this.distanceX,e-=this.distanceY);for(var a,o,r=t,n=e,s=0;s<this.size;s++)if(r-=this.boxSize,r<0){a=s;break}for(var c=0;c<this.size;c++)if(n-=this.boxSize,n<0){o=c;break}return{re_x:a,re_y:o}},n.prototype.beforeDraw=function(t,e,i){var a,o,r,n,s,c;if(i&&Math.abs(e-this.preY)+Math.abs(t-this.preX)>2)if(n=Math.abs(e-this.preY),r=Math.abs(t-this.preX),s=this.preX,c=this.preY,o=e>this.preY?1:-1,a=t>this.preX?1:-1,n>r)for(var l=0;l<n;l++)c+=o,r>0?(s+=a,this.drawUnit(s,c),this.gridArr[s+this.size*c]=this.ifClear?0:1,r--):(this.drawUnit(s,c),this.gridArr[s+this.size*c]=this.ifClear?0:1);else for(var d=0;d<r;d++)s+=a,n>0?(c+=o,this.drawUnit(s,c),this.gridArr[s+this.size*c]=this.ifClear?0:1,n--):(this.drawUnit(s,c),this.gridArr[s+this.size*c]=this.ifClear?0:1);else this.drawUnit(t,e),this.gridArr[t+this.size*e]=this.ifClear?0:1;this.preX=t,this.preY=e},n.prototype.bg_color=function(t){return t%2===0?"#fff":"#eee"},n.prototype.drawBg=function(){for(var t=this.penColor,e=0;e<this.size;e++)for(var i=0;i<this.size;i++)this.penColor=this.bg_color(e+i),this.gridArr[e+this.size*i]||this.drawUnit(e,i);this.penColor=t},n.prototype.clearBg=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)this.gridArr[t+this.size*e]||this.cleanUnit(t,e)},n.prototype.drawUnit=function(t,e){var i=t*this.boxSize,a=e*this.boxSize;this.cvs.beginPath(),this.cvs.fillStyle=this.ifClear?this.bg_color(t+e):this.penColor,this.cvs.fillRect(i,a,this.boxSize,this.boxSize),this.cvs.fill(),this.cvs.stroke(),this.cvs.closePath()},n.prototype.cleanUnit=function(t,e){var i=t*this.boxSize,a=e*this.boxSize;this.cvs.clearRect(i,a,this.boxSize,this.boxSize)},n.prototype.export=function(t){var e="image/png";this.clearBg();var i=this.canvas.toDataURL(e),a=document.createElement("a");a.download=t,a.href=i,a.dataset.downloadurl=[e,a.download,a.href].join(":"),this.drawBg(),document.body.appendChild(a),a.click(),document.body.removeChild(a)};var s=function(t,e,i){var a,o=null;return function(){var r=this,n=arguments,s=+new Date;clearTimeout(o),a||(a=s),s-a>=i?(t.apply(r,n),a=s):o=setTimeout((function(){t.apply(r,n)}),e)}},c={name:"App",data:function(){return{drawer:null,fab:!1,export_filename:"a1",cvs:null,penColor:"#000",bgColor:"#fff",color_selector:"#000",dialog:!1,dialog2:!1,dialog3:!0,dialog4:!1,history:[{v:"#000000",i:0},{v:"#ff8888",i:1},{v:"#49c163",i:2},{v:"#4c7bc1",i:3},{v:"#ffdd83",i:4},{v:"#c457c2",i:5},{v:"#ff7878",i:6}],canvas_size:16}},methods:{setColor:function(t){this.cvs.SetColor(t),this.penColor=t},addColor:function(){this.history.push({v:this.color_selector,i:this.history.length})},exportt:function(){this.cvs.export(this.export_filename)},set_size:function(){this.dialog3=!1;var t=this.$refs.canvas;this.cvs=new n(t,this.canvas_size)}}},l=c,d=(i("fe60"),i("2877")),v=i("6544"),p=i.n(v),h=i("7496"),u=i("40dc"),f=i("5bc1"),b=i("8336"),g=i("b0af"),m=i("99d9"),_=i("62ad"),x=i("a523"),y=i("169a"),w=i("132d"),C=i("f6c4"),k=i("f774"),z=i("0fd9"),S=i("2fa4"),X=i("c73b"),Y=i("8654"),V=i("2a7f"),A=Object(d["a"])(l,o,r,!1,null,"5b3a0ec4",null),j=A.exports;p()(A,{VApp:h["a"],VAppBar:u["a"],VAppBarNavIcon:f["a"],VBtn:b["a"],VCard:g["a"],VCardActions:m["a"],VCardTitle:m["b"],VCol:_["a"],VContainer:x["a"],VDialog:y["a"],VIcon:w["a"],VMain:C["a"],VNavigationDrawer:k["a"],VRow:z["a"],VSpacer:S["a"],VSpeedDial:X["a"],VTextField:Y["a"],VToolbarTitle:V["a"]});var D=i("f309");a["a"].use(D["a"]);var E=new D["a"]({});a["a"].config.productionTip=!1,new a["a"]({vuetify:E,render:function(t){return t(j)}}).$mount("#app")},e4c1:function(t,e,i){},fe60:function(t,e,i){"use strict";var a=i("e4c1"),o=i.n(a);o.a}});
//# sourceMappingURL=app.ceaff20e.js.map