(function(t){function e(e){for(var r,s,n=e[0],c=e[1],l=e[2],h=0,p=[];h<n.length;h++)s=n[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],r=!0,n=1;n<i.length;n++){var c=i[n];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},o={app:0},a=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/draw/dist/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"37d6":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-app",{attrs:{id:"inspire"}},[i("v-navigation-drawer",{attrs:{app:"",clipped:t.$vuetify.breakpoint.lgAndUp},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[i("v-text-field",{attrs:{flat:"",solo:"",filled:"","hide-details":"","prepend-inner-icon":"mdi-pen","append-icon":"mdi-plus","background-color":"#f1f1f1",label:"color"},on:{"click:append":t.addColor},model:{value:t.color_selector,callback:function(e){t.color_selector=e},expression:"color_selector"}}),i("div",{staticClass:"color-viewer",style:"background-color: "+t.color_selector}),i("div",t._l(t.history,(function(e){return i("div",{key:e.i,staticClass:"color-item"},[i("v-btn",{staticClass:"color-box",style:"background-color: "+e.v,attrs:{small:"",depressed:""}}),i("v-btn",{attrs:{text:"",small:""},on:{click:function(){return t.setBgColor(e.v)}}},[t._v("Background")]),i("v-btn",{attrs:{text:"",small:""},on:{click:function(){return t.setColor(e.v)}}},[t._v("Pen")])],1)})),0)],1),i("v-app-bar",{attrs:{"clipped-left":t.$vuetify.breakpoint.lgAndUp,app:"",color:"blue darken-3",dark:""}},[i("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),i("v-toolbar-title",{staticClass:"ml-0 pl-4",staticStyle:{width:"300px"}},[i("span",{staticClass:"hidden-sm-and-down"},[t._v("PIXEL DRAWER")])])],1),i("v-main",{staticStyle:{"background-color":"rgba(241, 241, 241, 0.5)"}},[i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("canvas",{ref:"canvas",attrs:{id:"canvas"}})]),i("div",{staticClass:"now-color"},[i("div",{staticClass:"pen"},[i("div",{staticClass:"color-box",style:"background-color: "+t.penColor}),i("div",{staticClass:"bar"},[i("p",[i("b",[t._v("画笔颜色")])]),i("p",[t._v(t._s(t.penColor))])])]),i("div",{staticClass:"bg"},[i("div",{staticClass:"color-box",style:"background-color: "+t.bgColor}),i("div",{staticClass:"bar"},[i("p",[i("b",[t._v(" 背板颜色")])]),i("p",[t._v(t._s(t.bgColor))])])])])],1)],1),i("v-speed-dial",{attrs:{bottom:"",right:"",fixed:""},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-btn",{attrs:{color:"pink",dark:"",depressed:"",fab:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.fab?i("v-icon",[t._v("mdi-close")]):i("v-icon",[t._v("mdi-plus")])],1)]},proxy:!0}]),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[i("v-btn",{attrs:{color:"pink",dark:"",fab:"",depressed:""},on:{click:function(e){t.dialog=!t.dialog}}},[i("v-icon",[t._v("mdi-export")])],1),i("v-btn",{attrs:{color:"pink",dark:"",fab:"",depressed:""},on:{click:function(e){t.dialog2=!0}}},[i("v-icon",[t._v("mdi-help")])],1)],1),i("v-dialog",{attrs:{width:"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[t._v(" 导出图片 ")]),i("v-container",[i("v-row",{staticClass:"mx-2"},[i("v-col",{staticClass:"align-center justify-space-between",attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:"文件名"},model:{value:t.export_filename,callback:function(e){t.export_filename=e},expression:"export_filename"}})],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),i("v-btn",{attrs:{text:""},on:{click:function(){t.dialog=!1,t.exportt()}}},[t._v("Save")])],1)],1)],1),i("v-dialog",{attrs:{width:"800px"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[i("v-card",[i("v-card-title",[t._v(" 说明 ")]),i("v-container",[i("v-row",{staticClass:"mx-2"},[i("v-col",{staticClass:"align-center justify-space-between",attrs:{cols:"12"}},[t._v(" 本网页程序应当在PC端使用。 左侧是调色器以及色彩板，可以选择笔刷颜色和背景颜色 （导出图片时，背景颜色不显示） 笔刷颜色设置为空时，表示橡皮擦 ")])],1)],1),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog2=!1}}},[t._v("OK")])],1)],1)],1)],1)],1)},a=[];i("cb29"),i("a15b"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0");function s(t){return this.bgColor="#fff",this.canvas=t,this.cvs=t.getContext("2d"),this.penColor="#000",this.ifClear=!1,this.boxSize=null,this.colorArr=new Set,this.size=16,this.gridArr=new Array(this.size*this.size),this.distanceX=null,this.distanceY=null,this.preX=null,this.preY=null,this.start(),this.click(),this.touchstart(),this}s.prototype.SetColor=function(t){t?(this.penColor=t,this.ifClear=!1):(this.penColor=this.bgColor,this.ifClear=!0)},s.prototype.computerWindow=function(){this.distanceX=this.canvas.getBoundingClientRect().x,this.distanceY=this.canvas.getBoundingClientRect().y},s.prototype.start=function(){var t;t=window.innerHeight>window.innerWidth?parseInt(.85*window.innerWidth):parseInt(.85*window.innerHeight),t=parseInt(t/this.size)*this.size,this.canvas.width=this.canvas.height=t,this.boxSize=t/this.size,this.computerWindow(),this.drawBg()},s.prototype.touchstart=function(){var t=this.touchmove.bind(this);this.canvas.addEventListener("touchstart",function(e){e.preventDefault();var i=e.changedTouches[0],r=this.computedXY(i.pageX,i.pageY,!0);this.beforeDraw(r.re_x,r.re_y),this.canvas.addEventListener("touchmove",n(t,5,20))}.bind(this)),this.canvas.addEventListener("touchend",function(){this.canvas.removeEventListener("touchmove",t)}.bind(this))},s.prototype.click=function(){var t=this.mousemove.bind(this);this.canvas.addEventListener("mousedown",function(e){e.preventDefault();var i=this.computedXY(e.offsetX,e.offsetY);this.beforeDraw(i.re_x,i.re_y),this.canvas.addEventListener("mousemove",t)}.bind(this)),this.canvas.addEventListener("mouseleave",function(){this.canvas.removeEventListener("mousemove",t)}.bind(this)),this.canvas.addEventListener("mouseup",function(){this.canvas.removeEventListener("mousemove",t)}.bind(this))},s.prototype.mousemove=function(t){var e=this.computedXY(t.offsetX,t.offsetY);e.re_y&&e.re_x&&this.beforeDraw(e.re_x,e.re_y,!0)},s.prototype.touchmove=function(t){var e=t.changedTouches[0],i=this.computedXY(e.pageX,e.pageY,!0);i.re_y&&i.re_x&&(i.re_x===this.preX&&i.re_y===this.preY||this.beforeDraw(i.re_x,i.re_y,!0))},s.prototype.computedXY=function(t,e,i){i&&(t-=this.distanceX,e-=this.distanceY);for(var r,o,a=t,s=e,n=0;n<this.size;n++)if(a-=this.boxSize,a<0){r=n;break}for(var c=0;c<this.size;c++)if(s-=this.boxSize,s<0){o=c;break}return{re_x:r,re_y:o}},s.prototype.beforeDraw=function(t,e,i){var r,o,a,s,n,c;if(i&&Math.abs(e-this.preY)+Math.abs(t-this.preX)>2)if(s=Math.abs(e-this.preY),a=Math.abs(t-this.preX),n=this.preX,c=this.preY,o=e>this.preY?1:-1,r=t>this.preX?1:-1,s>a)for(var l=0;l<s;l++)c+=o,a>0?(n+=r,this.drawUnit(n,c),this.gridArr[n+this.size*c]=this.ifClear?0:1,a--):(this.drawUnit(n,c),this.gridArr[n+this.size*c]=this.ifClear?0:1);else for(var d=0;d<a;d++)n+=r,s>0?(c+=o,this.drawUnit(n,c),this.gridArr[n+this.size*c]=this.ifClear?0:1,s--):(this.drawUnit(n,c),this.gridArr[n+this.size*c]=this.ifClear?0:1);else this.drawUnit(t,e),this.gridArr[t+this.size*e]=this.ifClear?0:1;this.preX=t,this.preY=e,this.colorArr.add(this.penColor)},s.prototype.clean=function(){this.gridArr=new Array(this.size*this.size),this.drawBg()},s.prototype.drawBg=function(){var t=this.penColor;this.penColor=this.bgColor;for(var e=0;e<this.size;e++)for(var i=0;i<this.size;i++)this.gridArr[e+this.size*i]||this.drawUnit(e,i);this.penColor=t},s.prototype.clearBg=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)this.gridArr[t+this.size*e]||this.cleanUnit(t,e)},s.prototype.drawUnit=function(t,e){var i=t*this.boxSize,r=e*this.boxSize;this.cvs.beginPath(),this.cvs.fillStyle=this.penColor,this.cvs.fillRect(i,r,this.boxSize,this.boxSize),this.cvs.fill(),this.cvs.stroke(),this.cvs.closePath()},s.prototype.cleanUnit=function(t,e){var i=t*this.boxSize,r=e*this.boxSize;this.cvs.clearRect(i,r,this.boxSize,this.boxSize)},s.prototype.export=function(t){var e="image/png";this.clearBg();var i=this.canvas.toDataURL(e),r=document.createElement("a");r.download=t,r.href=i,r.dataset.downloadurl=[e,r.download,r.href].join(":"),this.drawBg(),document.body.appendChild(r),r.click(),document.body.removeChild(r)};var n=function(t,e,i){var r,o=null;return function(){var a=this,s=arguments,n=+new Date;clearTimeout(o),r||(r=n),n-r>=i?(t.apply(a,s),r=n):o=setTimeout((function(){t.apply(a,s)}),e)}},c={name:"App",data:function(){return{drawer:null,fab:!1,export_filename:"a1",cvs:null,penColor:"#000",bgColor:"#fff",color_selector:"#000",dialog:!1,dialog2:!1,history:[{v:"#000000",i:0},{v:"#123456",i:1}]}},methods:{setColor:function(t){this.cvs.SetColor(t),this.penColor=t},setBgColor:function(t){this.bgColor=t,this.cvs.bgColor=t,this.cvs.drawBg()},addColor:function(){this.history.push({v:this.color_selector,i:this.history.length})},exportt:function(){this.cvs.export(this.export_filename)}},mounted:function(){var t=this.$refs.canvas;this.cvs=new s(t)}},l=c,d=(i("d7ee"),i("2877")),h=i("6544"),p=i.n(h),v=i("7496"),u=i("40dc"),f=i("5bc1"),b=i("8336"),g=i("b0af"),m=i("99d9"),w=i("62ad"),y=i("a523"),C=i("169a"),x=i("132d"),_=i("f6c4"),k=i("f774"),z=i("0fd9"),S=i("2fa4"),A=i("c73b"),X=i("8654"),Y=i("2a7f"),V=Object(d["a"])(l,o,a,!1,null,"68018e98",null),B=V.exports;p()(V,{VApp:v["a"],VAppBar:u["a"],VAppBarNavIcon:f["a"],VBtn:b["a"],VCard:g["a"],VCardActions:m["a"],VCardTitle:m["b"],VCol:w["a"],VContainer:y["a"],VDialog:C["a"],VIcon:x["a"],VMain:_["a"],VNavigationDrawer:k["a"],VRow:z["a"],VSpacer:S["a"],VSpeedDial:A["a"],VTextField:X["a"],VToolbarTitle:Y["a"]});var j=i("f309");r["a"].use(j["a"]);var E=new j["a"]({});r["a"].config.productionTip=!1,new r["a"]({vuetify:E,render:function(t){return t(B)}}).$mount("#app")},d7ee:function(t,e,i){"use strict";var r=i("37d6"),o=i.n(r);o.a}});
//# sourceMappingURL=app.fc858cfe.js.map